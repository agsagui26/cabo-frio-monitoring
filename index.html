<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Center ‚Äî Monitoramento Cabo Frio | SAGUI</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
  <style>
    :root {
      --bg: #0f1117;
      --surface: #1a1d27;
      --surface2: #22263a;
      --border: #2e3350;
      --accent: #6c63ff;
      --accent2: #00d4aa;
      --accent3: #ff6b6b;
      --accent4: #ffd166;
      --text: #e8eaf6;
      --text-muted: #8892b0;
      --positive: #00d4aa;
      --negative: #ff6b6b;
      --neutral: #8892b0;
      --radius: 14px;
      --shadow: 0 4px 24px rgba(0,0,0,0.4);
    }
    * { box-sizing: border-box; margin: 0; padding: 0; }
    body {
      font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
    }

    /* ‚îÄ‚îÄ Header ‚îÄ‚îÄ */
    header {
      background: linear-gradient(135deg, #1a1d27 0%, #0f1117 100%);
      border-bottom: 1px solid var(--border);
      padding: 28px 40px 24px;
      position: sticky; top: 0; z-index: 100;
      backdrop-filter: blur(12px);
    }
    .header-inner { max-width: 1600px; margin: 0 auto; }
    .header-top { display: flex; align-items: center; gap: 16px; flex-wrap: wrap; justify-content: space-between; }
    .logo-badge {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      border-radius: 10px; padding: 8px 14px;
      font-size: 12px; font-weight: 700; letter-spacing: 1.5px;
      text-transform: uppercase; color: #fff;
    }
    header h1 { font-size: 1.4rem; font-weight: 700; color: var(--text); }
    header p { font-size: 0.85rem; color: var(--text-muted); margin-top: 6px; }
    .header-meta { display: flex; gap: 20px; margin-top: 12px; flex-wrap: wrap; }
    .meta-chip {
      background: var(--surface2); border: 1px solid var(--border);
      border-radius: 20px; padding: 4px 12px;
      font-size: 0.78rem; color: var(--text-muted);
    }
    .meta-chip strong { color: var(--accent2); }

    /* ‚îÄ‚îÄ Navigation Tabs ‚îÄ‚îÄ */
    .nav-tabs {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 8px;
      display: flex;
      gap: 6px;
      margin: 20px auto;
      max-width: 1600px;
      flex-wrap: wrap;
    }
    .nav-tab {
      flex: 1;
      min-width: 160px;
      padding: 12px 20px;
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      border-radius: 8px;
      transition: all 0.3s;
      text-align: center;
    }
    .nav-tab:hover {
      background: rgba(108, 99, 255, 0.1);
      color: var(--accent);
    }
    .nav-tab.active {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: #fff;
    }

    /* ‚îÄ‚îÄ Layout ‚îÄ‚îÄ */
    main { max-width: 1600px; margin: 0 auto; padding: 32px 24px 60px; }
    .page-content { display: none; }
    .page-content.active { display: block; }

    /* ‚îÄ‚îÄ Section titles ‚îÄ‚îÄ */
    .section-title {
      font-size: 0.7rem; font-weight: 700; letter-spacing: 2px;
      text-transform: uppercase; color: var(--accent);
      margin-bottom: 16px; display: flex; align-items: center; gap: 8px;
    }
    .section-title::after {
      content: ''; flex: 1; height: 1px; background: var(--border);
    }

    /* ‚îÄ‚îÄ KPI Cards ‚îÄ‚îÄ */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px; margin-bottom: 32px;
    }
    .kpi-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px 22px;
      position: relative; overflow: hidden;
      transition: transform 0.2s, box-shadow 0.2s;
    }
    .kpi-card:hover { transform: translateY(-2px); box-shadow: var(--shadow); }
    .kpi-card::before {
      content: ''; position: absolute; top: 0; left: 0; right: 0; height: 3px;
    }
    .kpi-card.accent::before { background: linear-gradient(90deg, var(--accent), var(--accent2)); }
    .kpi-card.negative::before { background: var(--negative); }
    .kpi-card.positive::before { background: var(--positive); }
    .kpi-card.neutral::before { background: var(--neutral); }
    .kpi-card.warning::before { background: var(--accent4); }
    .kpi-label { font-size: 0.72rem; color: var(--text-muted); letter-spacing: 0.5px; text-transform: uppercase; }
    .kpi-value { font-size: 2rem; font-weight: 800; margin: 6px 0 2px; line-height: 1; }
    .kpi-sub { font-size: 0.75rem; color: var(--text-muted); }

    /* ‚îÄ‚îÄ Chart Grid ‚îÄ‚îÄ */
    .chart-grid-2 {
      display: grid; grid-template-columns: repeat(auto-fit, minmax(480px, 1fr));
      gap: 20px; margin-bottom: 28px;
    }
    .chart-card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 22px 24px;
      box-shadow: var(--shadow);
    }
    .chart-card h3 {
      font-size: 0.88rem; font-weight: 600; color: var(--text);
      margin-bottom: 4px;
    }
    .chart-card p {
      font-size: 0.75rem; color: var(--text-muted); margin-bottom: 16px;
    }
    .chart-wrap { position: relative; height: 350px; }

    /* ‚îÄ‚îÄ Word Cloud ‚îÄ‚îÄ */
    .wordcloud-wrap {
      display: flex; flex-wrap: wrap; gap: 8px;
      align-items: center; padding: 12px 0;
      max-height: 320px; overflow-y: auto;
    }
    .word-tag {
      border-radius: 6px; padding: 6px 12px;
      cursor: pointer; transition: transform 0.15s;
      font-weight: 600; white-space: nowrap;
      font-size: 0.85rem;
    }
    .word-tag:hover { transform: scale(1.08); }

    /* ‚îÄ‚îÄ Comment cards ‚îÄ‚îÄ */
    .comment-list { display: flex; flex-direction: column; gap: 12px; }
    .comment-card {
      background: var(--surface2); border: 1px solid var(--border);
      border-radius: 10px; padding: 14px 16px;
    }
    .comment-header { 
      display: flex; align-items: center; gap: 10px; margin-bottom: 8px; 
      justify-content: space-between; flex-wrap: wrap;
    }
    .comment-avatar {
      width: 32px; height: 32px; border-radius: 50%;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      display: flex; align-items: center; justify-content: center;
      font-size: 0.75rem; font-weight: 700; color: #fff; flex-shrink: 0;
    }
    .comment-user { font-size: 0.82rem; font-weight: 600; }
    .comment-text { 
      font-size: 0.88rem; line-height: 1.6; color: var(--text); 
      margin-bottom: 10px; padding: 8px 0;
    }
    .comment-footer { display: flex; gap: 8px; flex-wrap: wrap; align-items: center; }
    .badge {
      display: inline-block; border-radius: 20px;
      padding: 3px 12px; font-size: 0.72rem; font-weight: 700;
    }
    .badge-neg { background: rgba(255,107,107,0.15); color: var(--negative); border: 1px solid rgba(255,107,107,0.3); }
    .badge-pos { background: rgba(0,212,170,0.15); color: var(--positive); border: 1px solid rgba(0,212,170,0.3); }
    .badge-neu { background: rgba(136,146,176,0.15); color: var(--neutral); border: 1px solid rgba(136,146,176,0.3); }
    .badge-location { background: rgba(168,85,247,0.15); color: #c77dff; border: 1px solid rgba(168,85,247,0.3); }
    .badge-theme { background: rgba(255,209,102,0.15); color: var(--accent4); border: 1px solid rgba(255,209,102,0.3); }

    /* ‚îÄ‚îÄ Search ‚îÄ‚îÄ */
    .search-box {
      width: 100%;
      padding: 12px 16px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 0.85rem;
      margin-bottom: 16px;
      font-family: inherit;
    }
    .search-box:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(108, 99, 255, 0.1);
    }

    /* ‚îÄ‚îÄ Alert box ‚îÄ‚îÄ */
    .alert-box {
      background: rgba(255,107,107,0.1);
      border: 1px solid rgba(255,107,107,0.3);
      border-left: 4px solid var(--negative);
      border-radius: var(--radius);
      padding: 16px 20px;
      margin-bottom: 16px;
    }
    .alert-title { 
      font-weight: 700; color: var(--negative); margin-bottom: 6px; 
      font-size: 0.82rem; text-transform: uppercase; letter-spacing: 1px; 
    }

    /* ‚îÄ‚îÄ Location bars ‚îÄ‚îÄ */
    .location-bars { display: flex; flex-direction: column; gap: 10px; }
    .loc-row { display: flex; align-items: center; gap: 12px; }
    .loc-name { font-size: 0.85rem; min-width: 140px; color: var(--text); font-weight: 500; }
    .loc-bar-wrap { flex: 1; background: var(--surface2); border-radius: 6px; height: 12px; overflow: hidden; }
    .loc-bar { 
      height: 100%; border-radius: 6px; 
      background: linear-gradient(90deg, var(--accent), var(--accent2)); 
      transition: width 0.8s ease; 
    }
    .loc-count { font-size: 0.8rem; color: var(--text-muted); min-width: 50px; text-align: right; font-weight: 600; }

    /* ‚îÄ‚îÄ Map container ‚îÄ‚îÄ */
    .map-container {
      background: var(--surface2);
      border-radius: var(--radius);
      height: 500px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      border: 1px solid var(--border);
      position: relative;
      overflow: hidden;
    }
    .map-placeholder {
      text-align: center;
      padding: 40px;
    }

    /* ‚îÄ‚îÄ Theme folders ‚îÄ‚îÄ */
    .theme-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 30px;
    }
    .theme-folder {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s;
    }
    .theme-folder:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow);
      border-color: var(--accent);
    }
    .theme-icon {
      font-size: 2rem;
      margin-bottom: 10px;
    }
    .theme-count {
      font-size: 1.8rem;
      font-weight: 800;
      color: var(--accent2);
      margin-bottom: 6px;
    }
    .theme-name {
      font-size: 0.85rem;
      color: var(--text);
      font-weight: 600;
    }

    /* ‚îÄ‚îÄ Theme detail ‚îÄ‚îÄ */
    .theme-detail {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: var(--radius);
      padding: 24px;
      margin-bottom: 20px;
    }
    .theme-detail h4 {
      font-size: 1rem;
      color: var(--accent);
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .demand-list {
      list-style: none;
    }
    .demand-item {
      background: var(--surface2);
      border-left: 3px solid var(--accent2);
      padding: 12px 16px;
      margin-bottom: 10px;
      border-radius: 6px;
      font-size: 0.85rem;
      line-height: 1.5;
    }
    .demand-item strong {
      color: var(--accent2);
      margin-right: 8px;
    }

    /* ‚îÄ‚îÄ Insight box ‚îÄ‚îÄ */
    .insight-box {
      background: linear-gradient(135deg, rgba(108,99,255,0.1), rgba(0,212,170,0.05));
      border: 1px solid rgba(108,99,255,0.3);
      border-radius: var(--radius); padding: 16px 20px;
      margin-bottom: 28px;
    }
    .insight-box h4 { 
      font-size: 0.82rem; color: var(--accent); margin-bottom: 8px; 
      font-weight: 700; text-transform: uppercase; letter-spacing: 1px; 
    }
    .insight-box p { font-size: 0.85rem; color: var(--text-muted); line-height: 1.6; }
    .insight-box strong { color: var(--text); }

    /* ‚îÄ‚îÄ Scrollbar ‚îÄ‚îÄ */
    ::-webkit-scrollbar { width: 6px; height: 6px; }
    ::-webkit-scrollbar-track { background: var(--surface); }
    ::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

    /* ‚îÄ‚îÄ Responsive ‚îÄ‚îÄ */
    @media (max-width: 768px) {
      header { padding: 20px 16px; }
      main { padding: 20px 12px 40px; }
      .chart-grid-2 { grid-template-columns: 1fr; }
      .kpi-grid { grid-template-columns: repeat(2, 1fr); }
      .theme-grid { grid-template-columns: repeat(2, 1fr); }
    }

    /* ‚îÄ‚îÄ Footer ‚îÄ‚îÄ */
    footer {
      text-align: center; padding: 24px;
      font-size: 0.75rem; color: var(--text-muted);
      border-top: 1px solid var(--border);
      margin-top: 40px;
    }

    /* ‚îÄ‚îÄ Filter tabs ‚îÄ‚îÄ */
    .filter-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    .filter-tab {
      padding: 8px 16px;
      background: var(--surface2);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text-muted);
      font-size: 0.8rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }
    .filter-tab:hover {
      border-color: var(--accent);
      color: var(--accent);
    }
    .filter-tab.active {
      background: var(--accent);
      border-color: var(--accent);
      color: #fff;
    }
  </style>
</head>
<body>

<header>
  <div class="header-inner">
    <div class="header-top">
      <div style="display: flex; align-items: center; gap: 16px;">
        <span class="logo-badge">SAGUI</span>
        <div>
          <h1>Monitoramento de Redes Sociais ‚Äî Taxa do Lixo</h1>
          <p>Sistema de An√°lise L√©xico-Sem√¢ntica ‚Ä¢ Cabo Frio - RJ</p>
        </div>
      </div>
      <div style="text-align: right;">
        <div style="font-size: 1.8rem; font-weight: 800; color: var(--accent2);" id="current-date">24</div>
        <div style="font-size: 0.75rem; color: var(--text-muted);">FEV 2026</div>
      </div>
    </div>
    <div class="header-meta" id="header-meta">
      <span class="meta-chip">Total: <strong>0 coment√°rios</strong></span>
      <span class="meta-chip">Per√≠odo: <strong>Fevereiro 2026</strong></span>
      <span class="meta-chip">Fontes: <strong>Instagram + Facebook</strong></span>
      <span class="meta-chip">Status: <strong>Processando...</strong></span>
    </div>
  </div>
</header>

<!-- Navigation -->
<div class="nav-tabs">
  <button class="nav-tab active" onclick="showPage('overview')">üìä Vis√£o Geral</button>
  <button class="nav-tab" onclick="showPage('comments')">üí¨ Coment√°rios</button>
  <button class="nav-tab" onclick="showPage('locations')">üìç Localiza√ß√£o</button>
  <button class="nav-tab" onclick="showPage('themes')">üìÅ Temas/Pedidos</button>
</div>

<main>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- P√ÅGINA 1: VIS√ÉO GERAL -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="overview" class="page-content active">
    
    <!-- KPIs -->
    <div class="section-title">Indicadores Gerais</div>
    <div class="kpi-grid">
      <div class="kpi-card accent">
        <div class="kpi-label">Total de Coment√°rios</div>
        <div class="kpi-value" style="color:var(--accent2)" id="kpi-total">0</div>
        <div class="kpi-sub">Todas as fontes</div>
      </div>
      <div class="kpi-card negative">
        <div class="kpi-label">Sentimento Negativo</div>
        <div class="kpi-value" style="color:var(--negative)" id="kpi-negative">0%</div>
        <div class="kpi-sub"><span id="kpi-negative-count">0</span> coment√°rios</div>
      </div>
      <div class="kpi-card neutral">
        <div class="kpi-label">Sentimento Neutro</div>
        <div class="kpi-value" style="color:var(--neutral)" id="kpi-neutral">0%</div>
        <div class="kpi-sub"><span id="kpi-neutral-count">0</span> coment√°rios</div>
      </div>
      <div class="kpi-card positive">
        <div class="kpi-label">Sentimento Positivo</div>
        <div class="kpi-value" style="color:var(--positive)" id="kpi-positive">0%</div>
        <div class="kpi-sub"><span id="kpi-positive-count">0</span> coment√°rios</div>
      </div>
      <div class="kpi-card warning">
        <div class="kpi-label">Alertas Cr√≠ticos</div>
        <div class="kpi-value" style="color:var(--accent4)" id="kpi-alerts">0</div>
        <div class="kpi-sub">Monitoramento ativo</div>
      </div>
      <div class="kpi-card accent">
        <div class="kpi-label">Localidades</div>
        <div class="kpi-value" style="color:var(--accent)" id="kpi-locations">0</div>
        <div class="kpi-sub">Bairros mapeados</div>
      </div>
    </div>

    <!-- Executive Summary -->
    <div class="insight-box">
      <h4>üéØ Resumo Executivo</h4>
      <p id="executive-summary">Carregando an√°lise...</p>
    </div>

    <!-- Charts -->
    <div class="section-title">An√°lise de Sentimentos</div>
    <div class="chart-grid-2">
      <div class="chart-card">
        <h3>Distribui√ß√£o de Sentimentos</h3>
        <p>An√°lise l√©xico-sem√¢ntica com detec√ß√£o de ironia</p>
        <div class="chart-wrap">
          <canvas id="sentiment-pie"></canvas>
        </div>
      </div>

      <div class="chart-card">
        <h3>√çndice de Risco Pol√≠tico</h3>
        <p>Avalia√ß√£o multidimensional do impacto eleitoral</p>
        <div class="chart-wrap">
          <canvas id="risk-radar"></canvas>
        </div>
      </div>
    </div>

    <!-- Locations Overview -->
    <div class="section-title">Top 10 Localidades</div>
    <div class="chart-card">
      <h3>Principais Bairros Mencionados</h3>
      <p>Distribui√ß√£o geogr√°fica das men√ß√µes</p>
      <div class="chart-wrap">
        <canvas id="location-chart-overview"></canvas>
      </div>
    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- P√ÅGINA 2: COMENT√ÅRIOS -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="comments" class="page-content">
    
    <!-- Principais Coment√°rios Bem Elaborados -->
    <div class="section-title">üí¨ Principais Coment√°rios Bem Elaborados</div>
    <div class="chart-card">
      <h3>Coment√°rios Detalhados com Endere√ßo e Pedidos</h3>
      <p>Priorizando coment√°rios que indicam localiza√ß√£o espec√≠fica e demandas claras</p>
      <div class="comment-list" id="detailed-comments">
        <!-- Gerado dinamicamente -->
      </div>
    </div>

    <!-- Nuvem de Palavras -->
    <div class="section-title">‚òÅÔ∏è Nuvem de Palavras</div>
    <div class="chart-card">
      <h3>Top 50 Palavras Mais Frequentes</h3>
      <p>An√°lise de frequ√™ncia de termos nos coment√°rios</p>
      <div class="wordcloud-wrap" id="wordcloud-comments">
        <!-- Gerado dinamicamente -->
      </div>
    </div>

    <!-- Todos os Coment√°rios com Filtro -->
    <div class="section-title">üìù Todos os Coment√°rios</div>
    <div class="chart-card">
      <h3>Listagem Completa com Filtros</h3>
      <p>Busque e filtre por sentimento</p>
      
      <div class="filter-tabs">
        <button class="filter-tab active" onclick="filterCommentsBySentiment('all')">Todos</button>
        <button class="filter-tab" onclick="filterCommentsBySentiment('negativo')">Negativos</button>
        <button class="filter-tab" onclick="filterCommentsBySentiment('neutro')">Neutros</button>
        <button class="filter-tab" onclick="filterCommentsBySentiment('positivo')">Positivos</button>
      </div>

      <input type="text" class="search-box" id="search-all-comments" placeholder="üîç Buscar palavra espec√≠fica nos coment√°rios..." onkeyup="searchAllComments()">
      
      <div class="comment-list" id="all-comments-list" style="max-height: 600px; overflow-y: auto;">
        <!-- Gerado dinamicamente -->
      </div>
    </div>

    <!-- Monitoramento Especial -->
    <div class="section-title">üö® Monitoramento de Palavras Cr√≠ticas</div>
    <div id="critical-monitoring">
      <!-- Gerado dinamicamente -->
    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- P√ÅGINA 3: LOCALIZA√á√ÉO -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="locations" class="page-content">
    
    <!-- Mapa de Calor -->
    <div class="section-title">üó∫Ô∏è Mapa de Calor - Cabo Frio</div>
    <div class="chart-card">
      <h3>Visualiza√ß√£o Geogr√°fica</h3>
      <p>Mapa de calor com concentra√ß√£o de men√ß√µes por regi√£o</p>
      <div class="map-container">
        <div class="map-placeholder">
          <div style="font-size: 3rem; margin-bottom: 10px;">üó∫Ô∏è</div>
          <div><strong>Mapa de Cabo Frio</strong></div>
          <div style="font-size: 0.75rem; margin-top: 8px;">
            Integra√ß√£o com imagem de sat√©lite<br>
            Coloque uma imagem de Cabo Frio em /maps/cabo-frio.jpg
          </div>
        </div>
      </div>
    </div>

    <!-- An√°lise por Localidade -->
    <div class="section-title">üìä An√°lise Detalhada por Bairro</div>
    <div class="chart-grid-2">
      <div class="chart-card">
        <h3>Distribui√ß√£o de Men√ß√µes</h3>
        <p>Quantidade de coment√°rios por bairro</p>
        <div class="chart-wrap">
          <canvas id="location-chart-detail"></canvas>
        </div>
      </div>

      <div class="chart-card">
        <h3>Barras de Intensidade</h3>
        <p>Visualiza√ß√£o comparativa</p>
        <div class="location-bars" id="location-bars-detail" style="padding: 20px 0;">
          <!-- Gerado dinamicamente -->
        </div>
      </div>
    </div>

    <!-- Principais Cobran√ßas por Localiza√ß√£o -->
    <div class="section-title">üìç Principais Cobran√ßas da Popula√ß√£o por Localiza√ß√£o</div>
    <div id="demands-by-location">
      <!-- Gerado dinamicamente -->
    </div>

  </div>

  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <!-- P√ÅGINA 4: TEMAS/PEDIDOS -->
  <!-- ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê -->
  <div id="themes" class="page-content">
    
    <!-- Vis√£o Geral dos Temas -->
    <div class="section-title">üìä Principais Cobran√ßas por Tema</div>
    <div class="chart-card">
      <h3>Distribui√ß√£o de Temas</h3>
      <p>An√°lise de todas as categorias identificadas</p>
      <div class="chart-wrap">
        <canvas id="themes-chart-detail"></canvas>
      </div>
    </div>

    <!-- Pastas de Temas -->
    <div class="section-title">üìÅ Categorias Tem√°ticas</div>
    <div class="theme-grid" id="theme-folders">
      <!-- Gerado dinamicamente -->
    </div>

    <!-- Detalhamento de Cada Tema -->
    <div class="section-title">üîù Ranking de Demandas por Tema</div>
    <div id="theme-details">
      <!-- Gerado dinamicamente -->
    </div>

  </div>

</main>

<footer>
  <strong>SAGUI Data Center</strong> ‚Äî Sistema de Monitoramento de Redes Sociais<br>
  Cabo Frio - RJ ‚Ä¢ An√°lise L√©xico-Sem√¢ntica Automatizada ‚Ä¢ 2026
</footer>

<script>
  let reportData = null;
  let allComments = [];
  let currentCommentFilter = 'all';

  // Theme icons mapping
  const themeIcons = {
    'Saneamento': 'üö∞',
    'Estradas': 'üõ£Ô∏è',
    'Ordenamento': 'üèõÔ∏è',
    'Sa√∫de': 'üè•',
    'Seguran√ßa': 'üëÆ',
    'Ilumina√ß√£o': 'üí°',
    'Lixo': 'üóëÔ∏è',
    'Moradores de rua': 'üè†',
    'Mobilidade': 'üöå',
    'Esporte/lazer': '‚öΩ',
    'Educa√ß√£o': 'üìö',
    'Turismo': 'üèñÔ∏è',
    'Pediatria': 'üë∂',
    'Canil municipal': 'üêï'
  };

  // Navigation
  function showPage(pageId) {
    document.querySelectorAll('.page-content').forEach(page => {
      page.classList.remove('active');
    });
    document.querySelectorAll('.nav-tab').forEach(tab => {
      tab.classList.remove('active');
    });
    
    document.getElementById(pageId).classList.add('active');
    event.target.classList.add('active');
  }

  // Load data
  async function loadData() {
    try {
      const response = await fetch('report_data.json');
      reportData = await response.json();
      allComments = reportData.all_comments || [];
      renderAllPages();
    } catch (error) {
      console.error('Erro ao carregar dados:', error);
      document.getElementById('executive-summary').innerHTML = 
        '<strong style="color: var(--negative)">Erro ao carregar report_data.json</strong><br>Certifique-se de que o arquivo est√° na mesma pasta.';
    }
  }

  function renderAllPages() {
    if (!reportData) return;

    // Update header
    updateHeader();
    
    // Page 1: Overview
    updateKPIs();
    renderExecutiveSummary();
    renderSentimentPie();
    renderRiskRadar();
    renderLocationChartOverview();

    // Page 2: Comments
    renderDetailedComments();
    renderWordCloudComments();
    renderAllComments();
    renderCriticalMonitoring();

    // Page 3: Locations
    renderLocationChartDetail();
    renderLocationBarsDetail();
    renderDemandsByLocation();

    // Page 4: Themes
    renderThemesChartDetail();
    renderThemeFolders();
    renderThemeDetails();
  }

  function updateHeader() {
    const total = reportData.total_comments;
    document.getElementById('header-meta').innerHTML = `
      <span class="meta-chip">Total: <strong>${total.toLocaleString('pt-BR')} coment√°rios</strong></span>
      <span class="meta-chip">Per√≠odo: <strong>Fevereiro 2026</strong></span>
      <span class="meta-chip">Fontes: <strong>Instagram + Facebook</strong></span>
      <span class="meta-chip">Status: <strong>‚úì An√°lise Conclu√≠da</strong></span>
    `;

    const now = new Date();
    document.getElementById('current-date').textContent = now.getDate();
  }

  function updateKPIs() {
    const total = reportData.total_comments;
    const sentiments = reportData.sentiments;

    document.getElementById('kpi-total').textContent = total.toLocaleString('pt-BR');
    
    const negPct = ((sentiments.negativo / total) * 100).toFixed(1);
    document.getElementById('kpi-negative').textContent = negPct + '%';
    document.getElementById('kpi-negative-count').textContent = sentiments.negativo;

    const neuPct = ((sentiments.neutro / total) * 100).toFixed(1);
    document.getElementById('kpi-neutral').textContent = neuPct + '%';
    document.getElementById('kpi-neutral-count').textContent = sentiments.neutro;

    const posPct = ((sentiments.positivo / total) * 100).toFixed(1);
    document.getElementById('kpi-positive').textContent = posPct + '%';
    document.getElementById('kpi-positive-count').textContent = sentiments.positivo;

    const alertsCount = reportData.critical_alerts.length;
    document.getElementById('kpi-alerts').textContent = alertsCount;

    const locationsCount = Object.keys(reportData.locations).filter(l => l !== 'N√£o especificado').length;
    document.getElementById('kpi-locations').textContent = locationsCount;
  }

  function renderExecutiveSummary() {
    const total = reportData.total_comments;
    const negPct = ((reportData.sentiments.negativo / total) * 100).toFixed(1);
    const posPct = ((reportData.sentiments.positivo / total) * 100).toFixed(1);
    
    let status = '';
    let recommendation = '';
    
    if (negPct > 40) {
      status = '<strong style="color: var(--negative)">üî¥ SITUA√á√ÉO CR√çTICA</strong>';
      recommendation = 'A√ß√£o imediata necess√°ria. Alto risco pol√≠tico detectado. Implementar plano de conten√ß√£o urgente.';
    } else if (negPct > 25) {
      status = '<strong style="color: var(--accent4)">üü° ALERTA ELEVADO</strong>';
      recommendation = 'Monitoramento intensivo e a√ß√µes corretivas recomendadas nas pr√≥ximas 48h.';
    } else {
      status = '<strong style="color: var(--positive)">üü¢ SITUA√á√ÉO EST√ÅVEL</strong>';
      recommendation = 'Situa√ß√£o sob controle. Manter monitoramento regular e preventivo.';
    }

    const topLocations = Object.entries(reportData.locations)
      .filter(([name]) => name !== 'N√£o especificado')
      .sort((a, b) => b[1] - a[1])
      .slice(0, 3)
      .map(l => l[0])
      .join(', ');

    document.getElementById('executive-summary').innerHTML = `
      ${status} ‚Ä¢ 
      An√°lise de <strong>${total}</strong> coment√°rios revelou <strong>${negPct}%</strong> de sentimento negativo 
      contra apenas <strong>${posPct}%</strong> positivo. 
      ${recommendation}
      <br><br>
      <strong>Foco Principal:</strong> Taxa do Lixo ‚Ä¢ 
      <strong>Regi√µes Cr√≠ticas:</strong> ${topLocations} ‚Ä¢ 
      <strong>Alertas Ativos:</strong> ${reportData.critical_alerts.length}
    `;
  }

  function renderSentimentPie() {
    const ctx = document.getElementById('sentiment-pie').getContext('2d');
    const sentiments = reportData.sentiments;

    new Chart(ctx, {
      type: 'doughnut',
      data: {
        labels: ['Negativo', 'Neutro', 'Positivo'],
        datasets: [{
          data: [sentiments.negativo, sentiments.neutro, sentiments.positivo],
          backgroundColor: ['#ff6b6b', '#8892b0', '#00d4aa'],
          borderWidth: 0
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: {
            position: 'bottom',
            labels: { color: '#e8eaf6', padding: 15, font: { size: 12 } }
          },
          datalabels: {
            color: '#fff',
            font: { weight: 'bold', size: 14 },
            formatter: (value, ctx) => {
              const total = ctx.dataset.data.reduce((a, b) => a + b, 0);
              const percentage = ((value / total) * 100).toFixed(1);
              return percentage + '%';
            }
          }
        }
      }
    });
  }

  function renderRiskRadar() {
    const ctx = document.getElementById('risk-radar').getContext('2d');
    const negativeRatio = reportData.sentiments.negativo / reportData.total_comments;

    new Chart(ctx, {
      type: 'radar',
      data: {
        labels: ['Rejei√ß√£o Popular', 'Crise Tribut√°ria', 'Risco Eleitoral', 'Imagem P√∫blica', 'Viabilidade Estadual'],
        datasets: [{
          label: 'N√≠vel de Risco',
          data: [
            Math.min(negativeRatio * 100, 100),
            Math.min(negativeRatio * 120, 100),
            Math.min((reportData.sentiments.negativo / Math.max(reportData.sentiments.positivo, 1)) * 30, 100),
            Math.min(negativeRatio * 90, 100),
            Math.min(negativeRatio * 85, 100)
          ],
          backgroundColor: 'rgba(255, 107, 107, 0.2)',
          borderColor: '#ff6b6b',
          borderWidth: 2,
          pointBackgroundColor: '#ff6b6b',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: '#ff6b6b'
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        scales: {
          r: {
            beginAtZero: true,
            max: 100,
            ticks: { color: '#8892b0', backdropColor: 'transparent', stepSize: 20 },
            grid: { color: '#2e3350' },
            pointLabels: { color: '#e8eaf6', font: { size: 11 } }
          }
        },
        plugins: {
          legend: { display: false }
        }
      }
    });
  }

  function renderLocationChartOverview() {
    const ctx = document.getElementById('location-chart-overview').getContext('2d');
    const locations = Object.entries(reportData.locations)
      .filter(([name]) => name !== 'N√£o especificado')
      .sort((a, b) => b[1] - a[1])
      .slice(0, 10);

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: locations.map(l => l[0]),
        datasets: [{
          label: 'Men√ß√µes',
          data: locations.map(l => l[1]),
          backgroundColor: 'rgba(108, 99, 255, 0.8)',
          borderColor: '#6c63ff',
          borderWidth: 1,
          borderRadius: 6
        }]
      },
      options: {
        indexAxis: 'y',
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        },
        scales: {
          x: {
            grid: { color: '#2e3350' },
            ticks: { color: '#8892b0' }
          },
          y: {
            grid: { display: false },
            ticks: { color: '#e8eaf6', font: { size: 11 } }
          }
        }
      }
    });
  }

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // P√ÅGINA 2: COMENT√ÅRIOS
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  function renderDetailedComments() {
    // Filtrar coment√°rios bem elaborados (com endere√ßo e pedido claro)
    const detailedComments = allComments.filter(c => {
      const hasLocation = c.locations.some(l => l !== 'N√£o especificado');
      const hasTheme = c.themes.length > 0;
      const isDetailed = c.text.length > 50; // Coment√°rio com mais de 50 caracteres
      return hasLocation && hasTheme && isDetailed;
    }).sort((a, b) => {
      const engageA = parseInt(a.likes || 0) + parseInt(a.replies || 0);
      const engageB = parseInt(b.likes || 0) + parseInt(b.replies || 0);
      return engageB - engageA;
    }).slice(0, 15);

    const container = document.getElementById('detailed-comments');
    container.innerHTML = detailedComments.map(comment => {
      const initial = comment.username.charAt(0).toUpperCase();
      const sentimentClass = `badge-${comment.sentiment === 'negativo' ? 'neg' : comment.sentiment === 'positivo' ? 'pos' : 'neu'}`;
      
      return `
        <div class="comment-card">
          <div class="comment-header">
            <div style="display: flex; align-items: center; gap: 10px;">
              <div class="comment-avatar">${initial}</div>
              <div>
                <div class="comment-user">@${comment.username}</div>
                <div style="font-size: 0.7rem; color: var(--text-muted);">
                  ${new Date(comment.timestamp || Date.now()).toLocaleDateString('pt-BR')}
                </div>
              </div>
            </div>
            <div style="font-size: 0.75rem; color: var(--text-muted);">
              ‚ù§Ô∏è ${comment.likes || 0} ‚Ä¢ üí¨ ${comment.replies || 0}
            </div>
          </div>
          <div class="comment-text">${comment.text}</div>
          <div class="comment-footer">
            <span class="badge ${sentimentClass}">${comment.sentiment}</span>
            ${comment.locations.filter(l => l !== 'N√£o especificado').map(loc => 
              `<span class="badge badge-location">üìç ${loc}</span>`
            ).join('')}
            ${comment.themes.slice(0, 2).map(theme => 
              `<span class="badge badge-theme">${themeIcons[theme] || 'üìå'} ${theme}</span>`
            ).join('')}
          </div>
        </div>
      `;
    }).join('');
  }

  function renderWordCloudComments() {
    const wordCounts = {};
    
    allComments.forEach(comment => {
      const words = comment.text.toLowerCase()
        .replace(/[^\w√Ä-√ø\s]/g, ' ')
        .split(/\s+/)
        .filter(w => w.length > 3 && !['para', 'pela', 'pelo', 'com', 'uma', 'isso', 'esse', 'esta', 'est√°', 'mais', 'muito', 'aqui'].includes(w));
      
      words.forEach(word => {
        wordCounts[word] = (wordCounts[word] || 0) + 1;
      });
    });

    const topWords = Object.entries(wordCounts)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 50);

    const maxCount = Math.max(...topWords.map(w => w[1]));
    const colors = ['#6c63ff', '#00d4aa', '#ff6b6b', '#ffd166', '#c77dff', '#a8dadc'];

    const container = document.getElementById('wordcloud-comments');
    container.innerHTML = topWords.map(([word, count], i) => {
      const size = 0.7 + (count / maxCount) * 1.5;
      const color = colors[i % colors.length];
      return `<span class="word-tag" style="font-size: ${size}rem; color: ${color}; background: ${color}22; border: 1px solid ${color}44;" onclick="searchWord('${word}')">${word} (${count})</span>`;
    }).join('');
  }

  function searchWord(word) {
    document.getElementById('search-all-comments').value = word;
    searchAllComments();
    // Scroll to all comments section
    document.getElementById('all-comments-list').scrollIntoView({ behavior: 'smooth' });
  }

  function renderAllComments() {
    displayComments(allComments);
  }

  function displayComments(comments) {
    const container = document.getElementById('all-comments-list');
    container.innerHTML = comments.slice(0, 100).map(comment => {
      const initial = comment.username.charAt(0).toUpperCase();
      const sentimentClass = `badge-${comment.sentiment === 'negativo' ? 'neg' : comment.sentiment === 'positivo' ? 'pos' : 'neu'}`;
      
      return `
        <div class="comment-card">
          <div class="comment-header">
            <div style="display: flex; align-items: center; gap: 10px;">
              <div class="comment-avatar">${initial}</div>
              <div class="comment-user">@${comment.username}</div>
            </div>
            <span class="badge ${sentimentClass}">${comment.sentiment}</span>
          </div>
          <div class="comment-text">${comment.text}</div>
          <div class="comment-footer">
            ${comment.locations.filter(l => l !== 'N√£o especificado').map(loc => 
              `<span class="badge badge-location">üìç ${loc}</span>`
            ).join('')}
            <span style="font-size: 0.75rem; color: var(--text-muted); margin-left: auto;">
              ‚ù§Ô∏è ${comment.likes || 0} ‚Ä¢ üí¨ ${comment.replies || 0}
            </span>
          </div>
        </div>
      `;
    }).join('');
  }

  function filterCommentsBySentiment(sentiment) {
    currentCommentFilter = sentiment;
    
    document.querySelectorAll('.filter-tab').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');

    let filtered = allComments;
    if (sentiment !== 'all') {
      filtered = allComments.filter(c => c.sentiment === sentiment);
    }

    displayComments(filtered);
  }

  function searchAllComments() {
    const searchTerm = document.getElementById('search-all-comments').value.toLowerCase();
    
    let filtered = allComments;
    if (currentCommentFilter !== 'all') {
      filtered = filtered.filter(c => c.sentiment === currentCommentFilter);
    }
    
    if (searchTerm) {
      filtered = filtered.filter(c => c.text.toLowerCase().includes(searchTerm));
    }

    displayComments(filtered);
  }

  function renderCriticalMonitoring() {
    const criticalKeywords = {
      'Mil√≠cia/Miliciano': ['milicia', 'miliciano', 'milicianos', 'mil√≠cia'],
      'Governo do Estado': ['governo do estado', 'governador', 'claudio castro', 'castro']
    };

    let html = '';

    for (const [category, keywords] of Object.entries(criticalKeywords)) {
      const matchingComments = allComments.filter(c => {
        const textLower = c.text.toLowerCase();
        return keywords.some(keyword => textLower.includes(keyword));
      });

      if (matchingComments.length > 0) {
        html += `
          <div class="alert-box">
            <div class="alert-title">üö® ${category}</div>
            <div style="color: var(--text); margin-bottom: 12px;">
              <strong>${matchingComments.length} men√ß√µes detectadas</strong>
            </div>
            <div style="max-height: 300px; overflow-y: auto;">
              ${matchingComments.slice(0, 5).map(c => `
                <div style="background: var(--surface); padding: 10px; margin-bottom: 8px; border-radius: 6px; font-size: 0.8rem;">
                  <strong>@${c.username}:</strong> ${c.text.substring(0, 150)}${c.text.length > 150 ? '...' : ''}
                </div>
              `).join('')}
            </div>
          </div>
        `;
      }
    }

    if (html === '') {
      html = '<div class="chart-card"><p style="text-align: center; color: var(--text-muted); padding: 30px;">‚úì Nenhuma palavra cr√≠tica detectada no monitoramento</p></div>';
    }

    document.getElementById('critical-monitoring').innerHTML = html;
  }

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // P√ÅGINA 3: LOCALIZA√á√ÉO
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  function renderLocationChartDetail() {
    const ctx = document.getElementById('location-chart-detail').getContext('2d');
    const locations = Object.entries(reportData.locations)
      .filter(([name]) => name !== 'N√£o especificado')
      .sort((a, b) => b[1] - a[1]);

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: locations.map(l => l[0]),
        datasets: [{
          label: 'Men√ß√µes',
          data: locations.map(l => l[1]),
          backgroundColor: 'rgba(0, 212, 170, 0.8)',
          borderColor: '#00d4aa',
          borderWidth: 1,
          borderRadius: 6
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        },
        scales: {
          x: {
            grid: { color: '#2e3350' },
            ticks: { color: '#8892b0', maxRotation: 45, minRotation: 45 }
          },
          y: {
            grid: { display: false },
            ticks: { color: '#e8eaf6' }
          }
        }
      }
    });
  }

  function renderLocationBarsDetail() {
    const locations = Object.entries(reportData.locations)
      .filter(([name]) => name !== 'N√£o especificado')
      .sort((a, b) => b[1] - a[1]);

    const maxCount = Math.max(...locations.map(l => l[1]));
    const container = document.getElementById('location-bars-detail');

    container.innerHTML = locations.map(([name, count]) => `
      <div class="loc-row">
        <div class="loc-name">${name}</div>
        <div class="loc-bar-wrap">
          <div class="loc-bar" style="width: ${(count / maxCount) * 100}%"></div>
        </div>
        <div class="loc-count">${count}</div>
      </div>
    `).join('');
  }

  function renderDemandsByLocation() {
    const locationDemands = {};

    allComments.forEach(comment => {
      comment.locations.forEach(location => {
        if (location !== 'N√£o especificado') {
          if (!locationDemands[location]) {
            locationDemands[location] = [];
          }
          locationDemands[location].push(comment);
        }
      });
    });

    const sortedLocations = Object.entries(locationDemands)
      .sort((a, b) => b[1].length - a[1].length)
      .slice(0, 10);

    const container = document.getElementById('demands-by-location');
    container.innerHTML = sortedLocations.map(([location, comments]) => {
      const topComments = comments
        .sort((a, b) => {
          const engageA = parseInt(a.likes || 0) + parseInt(a.replies || 0);
          const engageB = parseInt(b.likes || 0) + parseInt(b.replies || 0);
          return engageB - engageA;
        })
        .slice(0, 5);

      return `
        <div class="theme-detail">
          <h4>üìç ${location} <span style="color: var(--text-muted); font-size: 0.8rem; font-weight: normal;">(${comments.length} men√ß√µes)</span></h4>
          <ul class="demand-list">
            ${topComments.map((c, i) => `
              <li class="demand-item">
                <strong>#${i + 1}</strong>
                ${c.text.substring(0, 200)}${c.text.length > 200 ? '...' : ''}
                <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-muted);">
                  @${c.username} ‚Ä¢ ‚ù§Ô∏è ${c.likes || 0} ‚Ä¢ üí¨ ${c.replies || 0}
                </div>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
    }).join('');
  }

  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
  // P√ÅGINA 4: TEMAS/PEDIDOS
  // ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

  function renderThemesChartDetail() {
    const ctx = document.getElementById('themes-chart-detail').getContext('2d');
    const themes = Object.entries(reportData.themes)
      .filter(([name]) => name !== 'Outros')
      .sort((a, b) => b[1] - a[1]);

    new Chart(ctx, {
      type: 'bar',
      data: {
        labels: themes.map(t => t[0]),
        datasets: [{
          label: 'Men√ß√µes',
          data: themes.map(t => t[1]),
          backgroundColor: 'rgba(255, 209, 102, 0.8)',
          borderColor: '#ffd166',
          borderWidth: 1,
          borderRadius: 6
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: false,
        plugins: {
          legend: { display: false }
        },
        scales: {
          x: {
            grid: { color: '#2e3350' },
            ticks: { color: '#8892b0', maxRotation: 45, minRotation: 45 }
          },
          y: {
            grid: { display: false },
            ticks: { color: '#e8eaf6' }
          }
        }
      }
    });
  }

  function renderThemeFolders() {
    const mainThemes = [
      'Saneamento', 'Estradas', 'Ordenamento', 'Sa√∫de', 'Seguran√ßa',
      'Ilumina√ß√£o', 'Lixo', 'Moradores de rua', 'Mobilidade',
      'Esporte/lazer', 'Educa√ß√£o', 'Turismo', 'Pediatria', 'Canil municipal'
    ];

    const container = document.getElementById('theme-folders');
    container.innerHTML = mainThemes.map(theme => {
      const count = reportData.themes[theme] || 0;
      const icon = themeIcons[theme] || 'üìå';
      
      return `
        <div class="theme-folder">
          <div class="theme-icon">${icon}</div>
          <div class="theme-count">${count}</div>
          <div class="theme-name">${theme}</div>
        </div>
      `;
    }).join('');
  }

  function renderThemeDetails() {
    const themeComments = {};

    allComments.forEach(comment => {
      comment.themes.forEach(theme => {
        if (!themeComments[theme]) {
          themeComments[theme] = [];
        }
        themeComments[theme].push(comment);
      });
    });

    const sortedThemes = Object.entries(themeComments)
      .filter(([theme]) => theme !== 'Outros')
      .sort((a, b) => b[1].length - a[1].length);

    const container = document.getElementById('theme-details');
    container.innerHTML = sortedThemes.map(([theme, comments]) => {
      const topDemands = comments
        .sort((a, b) => {
          const engageA = parseInt(a.likes || 0) + parseInt(a.replies || 0);
          const engageB = parseInt(b.likes || 0) + parseInt(b.replies || 0);
          return engageB - engageA;
        })
        .slice(0, 10);

      const icon = themeIcons[theme] || 'üìå';

      return `
        <div class="theme-detail">
          <h4>${icon} ${theme} <span style="color: var(--text-muted); font-size: 0.8rem; font-weight: normal;">(${comments.length} men√ß√µes)</span></h4>
          <ul class="demand-list">
            ${topDemands.map((c, i) => `
              <li class="demand-item">
                <strong>#${i + 1}</strong>
                ${c.text.substring(0, 180)}${c.text.length > 180 ? '...' : ''}
                ${c.locations.filter(l => l !== 'N√£o especificado').length > 0 ? 
                  `<br><small style="color: var(--accent2);">üìç ${c.locations.filter(l => l !== 'N√£o especificado').join(', ')}</small>` : ''}
                <div style="margin-top: 6px; font-size: 0.75rem; color: var(--text-muted);">
                  @${c.username} ‚Ä¢ ‚ù§Ô∏è ${c.likes || 0} ‚Ä¢ üí¨ ${c.replies || 0}
                </div>
              </li>
            `).join('')}
          </ul>
        </div>
      `;
    }).join('');
  }

  // Load data on page load
  loadData();
</script>

</body>
</html>
